<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mooncafe.space</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- Landing View (Initially Hidden) -->
    <div id="landing-view" class="hidden">
        <div class="login-card">
            <h2>Welcome to mooncafe.space</h2>
            <p>No accounts, no history. Just strangers chatting.</p>
            <input type="text" id="nickname-input" placeholder="Nickname" required>
            <input type="text" id="flair-input" placeholder="Flair (e.g. #nightowl)" maxlength="25">
            <button id="enter-button">Enter the cafÃ©</button>
        </div>
    </div>

    <!-- Main Application Window -->
    <div class="main-window" id="chat-view">
        <!-- Title Bar -->
        <div class="title-bar">
            <div class="app-name">
                <svg viewBox="0 0 100 100">
                    <path class="cup" d="M10 30 H 80 C 90 30, 95 40, 95 50 C 95 60, 90 70, 80 70 H 10 Z"></path>
                    <path class="steam" d="M30 25 Q 35 15, 40 25"></path>
                    <path class="steam" d="M45 20 Q 50 10, 55 20"></path>
                    <path class="steam" d="M60 25 Q 65 15, 70 25"></path>
                </svg>
                mooncafe.space
            </div>
            <div class="status-time" id="status-time">12:00 PM</div>
        </div>

        <!-- Menu Bar -->
        <div class="menu-bar">
            <div id="current-user-session" style="display: none;"></div>
            <div class="menu-item" id="change-nickname-btn">Change Nickname</div>
            <div class="menu-item" id="create-circle-btn">Create/Share Circle</div>
            <div class="menu-item" id="about-btn">mooncafe.space/About</div>
            <div class="menu-item" id="collaborate-btn">Collaborate</div>
            <a href="https://github.com/your-repo/mooncafe.space" target="_blank" class="menu-item github-link">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg>
            </a>
        </div>

        <!-- Content Area -->
        <div class="content-area">
            <!-- Left: Chat Pane -->
            <div class="chat-pane">
                <div id="user-list-toggle-btn" class="user-list-toggle-desktop">&gt;&gt;</div>
                <div class="messages" id="message-container">
                    <!-- Messages will be loaded here -->
                </div>
            </div>

            <!-- Right: User List -->
            <div class="user-list" id="user-list-panel">
                <div class="user-list-header" id="user-list-header">0 Users >> 0 Ignored</div>
                <div class="users" id="user-list">
                    <!-- Users will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Bottom Control Bar -->
        <div class="control-bar">
            <div id="reply-indicator"></div>
            <div class="top-controls">
                <div class="font-controls">
                    <span>Name</span>
                    <select id="font-family-select">
                        <option value="var(--font-ui)">Tahoma</option>
                        <option value="var(--font-chat-special)">Special Elite</option>
                        <option value="var(--font-chat-hand)">Patrick Hand</option>
                        <option value="Arial">Arial</option>
                        <option value="Courier New">Courier New</option>
                    </select>
                    <select id="font-size-select">
                        <option value="1em">10</option>
                        <option value="1.2em">12</option>
                        <option value="1.4em">14</option>
                    </select>
                </div>
                <div class="style-controls">
                    <button class="style-button" id="bold-btn"><b>B</b></button>
                    <button class="style-button" id="italic-btn"><i>I</i></button>
                    <button class="style-button" id="underline-btn"><u>U</u></button>
                    <button class="emote-button" id="emote-picker-btn">ðŸ˜Š</button>
                </div>
            </div>
            <div class="bottom-controls">
                <div class="mini-buttons">
                    <button class="mini-btn" id="join-room-btn-open">ChangeRoom</button>
                </div>
                <div class="message-controls">
                    <input type="text" id="message-input" placeholder="Say something...">
                    <button id="send-button">Send</button>
                </div>
                <div class="scroll-toggle">
                    <input type="checkbox" id="scroll-on-checkbox" checked>
                    <label for="scroll-on-checkbox">Scroll On</label>
                </div>
            </div>
        </div>
    </div>

    <!-- Join Room Modal -->
    <div class="modal-overlay" id="join-room-modal">
        <div class="modal">
            <div class="modal-titlebar">
                <span>Join a Room</span>
                <button class="modal-close-btn" data-target-modal="join-room-modal">&times;</button>
            </div>
            <div class="modal-content">
                <div class="join-help-pane">
                    <p>Welcome to mooncafe!</p>
                    <p>Select a category and then choose a room to join.</p>
                </div>
                <div class="join-category-pane">
                    <div class="category-tree">
                        <ul>
                            <li>&#128193; General</li>
                            <li>&#128193; Hobbies</li>
                            <li>&#128193; Tech</li>
                        </ul>
                    </div>
                </div>
                <div class="join-rooms-pane">
                    <div class="rooms-list-container">
                         <ul class="room-list">
                            <li>#cafe</li>
                            <li>#lounge</li>
                            <li>#library</li>
                        </ul>
                    </div>
                    <button id="go-to-room-btn">Go to Room</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Emote Picker Modal -->
    <div class="modal-overlay" id="emote-picker-modal">
        <div class="modal">
            <div class="modal-titlebar">
                <span>Emotes</span>
                <button class="modal-close-btn" data-target-modal="emote-picker-modal">&times;</button>
            </div>
            <div class="modal-content" id="emote-grid">
                <!-- Emotes will be populated by JS -->
            </div>
        </div>
    </div>

    <!-- Circle Share Modal -->
    <div class="modal-overlay" id="share-circle-modal">
        <div class="modal">
            <div class="modal-titlebar">
                <span>Share this Circle</span>
                <button class="modal-close-btn" data-target-modal="share-circle-modal">&times;</button>
            </div>
            <div class="modal-content">
                <p>Invite others to this circle with this link:</p>
                <input type="text" id="share-link-input" readonly>
                <button id="copy-link-btn">Copy Link</button>
                <hr>
                <button id="new-circle-btn">Create a New Circle</button>
            </div>
        </div>
    </div>

    <!-- User Context Menu -->
    <div id="user-context-menu">
        <div data-action="pm">Private Message</div>
        <div data-action="profile">View Profile</div>
        <div data-action="ignore">Ignore</div>
    </div>

    <!-- About Modal -->
    <div class="modal-overlay" id="about-modal">
        <div class="modal">
            <div class="modal-titlebar">
                <span>About mooncafe.space</span>
                <button class="modal-close-btn" data-target-modal="about-modal">&times;</button>
            </div>
            <div class="modal-content">
                <h3>The Story of mooncafe.space</h3>
                <p>
                    This is a placeholder for the story behind the creation of this chat application. 
                    It was built to bring back the feeling of old-school, anonymous chatrooms from the early 2000s.
                    A place for strangers to connect and just talk, without the baggage of profiles, history, or algorithms.
                </p>
                <p>
                    Enjoy your stay in the cafÃ©.
                </p>
            </div>
        </div>
    </div>

    <!-- Collaborate Modal -->
    <div class="modal-overlay" id="collaborate-modal">
        <div class="modal">
            <div class="modal-titlebar">
                <span>Collaborate</span>
                <button class="modal-close-btn" data-target-modal="collaborate-modal">&times;</button>
            </div>
            <div class="modal-content">
                <h3>Interested in collaborating on mooncafe.space?</h3>
                <p>
                    Contact us at: <a href="mailto:collab@mooncafe.space">collab@mooncafe.space</a>
                </p>
                <button class="modal-close-btn" data-target-modal="collaborate-modal">Close</button>
            </div>
        </div>
    </div>
    
    <script src="/socket.io/socket.io.js"></script>
    <script src="main.js"></script>
</body>
</html>